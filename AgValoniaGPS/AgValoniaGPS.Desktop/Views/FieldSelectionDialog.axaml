<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AgValoniaGPS.Desktop.Views"
        mc:Ignorable="d" d:DesignWidth="700" d:DesignHeight="500"
        x:Class="AgValoniaGPS.Desktop.Views.FieldSelectionDialog"
        Title="Load Field"
        Width="700" Height="500"
        WindowStartupLocation="CenterOwner"
        Background="#E8E8E8"
        CanResize="True">

    <Window.Styles>
        <Style Selector="Button.ModernButton">
            <Setter Property="Background" Value="#3498DB"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button.ModernButton:pointerover">
            <Setter Property="Background" Value="#2980B9"/>
        </Style>
        <Style Selector="Button.ModernButton:pressed">
            <Setter Property="Background" Value="#21618C"/>
        </Style>

        <Style Selector="Button.DangerButton">
            <Setter Property="Background" Value="#E74C3C"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button.DangerButton:pointerover">
            <Setter Property="Background" Value="#C0392B"/>
        </Style>

        <Style Selector="ListBoxItem">
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Background" Value="Transparent"/>
        </Style>
        <Style Selector="ListBoxItem:selected">
            <Setter Property="Background" Value="#3498DB"/>
        </Style>
        <Style Selector="ListBoxItem:pointerover">
            <Setter Property="Background" Value="#34495E"/>
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto,*,Auto" Margin="0">
        <!-- Header: Load File button -->
        <Button Grid.Row="0" Content="Load File"
                Background="#D0D0D0"
                Foreground="Black"
                BorderBrush="#A0A0A0"
                BorderThickness="0,0,0,1"
                CornerRadius="0"
                Padding="10"
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Left"/>

        <!-- Fields DataGrid -->
        <DataGrid x:Name="FieldsGrid"
                  x:FieldModifier="private"
                  x:DataType="local:FieldInfo"
                  Grid.Row="1"
                  Margin="6"
                  Background="#C8D8E8"
                  BorderThickness="1"
                  BorderBrush="#A0A0A0"
                  GridLinesVisibility="All"
                  CanUserResizeColumns="True"
                  CanUserSortColumns="False"
                  IsReadOnly="True"
                  SelectionMode="Single"
                  AutoGenerateColumns="False"
                  RowBackground="#C8D8E8">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Field"
                                    Binding="{Binding Name}"
                                    Width="*"
                                    FontSize="14"
                                    FontWeight="SemiBold"/>
                <DataGridTextColumn Header="Distance"
                                    Binding="{Binding Distance, StringFormat=\{0:F2\}}"
                                    Width="120"
                                    FontSize="14"/>
                <DataGridTextColumn Header="Area"
                                    Binding="{Binding Area, StringFormat=\{0:F1\}}"
                                    Width="120"
                                    FontSize="14"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Action Buttons -->
        <Grid Grid.Row="2"
              ColumnDefinitions="Auto,Auto,*,Auto,Auto"
              Background="#D0D0D0"
              Height="80">

            <!-- Delete Field Button -->
            <Button Grid.Column="0" Margin="10" Width="80" Height="60" Background="White" BorderBrush="#A0A0A0" BorderThickness="1"
                    Click="BtnDeleteField_Click">
                <StackPanel Spacing="4">
                    <Image Source="/Assets/Icons/TrashApplied.png" Width="32" Height="32"/>
                    <TextBlock Text="Delete Field" FontSize="10" TextAlignment="Center" Foreground="Black"/>
                </StackPanel>
            </Button>

            <!-- Sort Button -->
            <Button Grid.Column="1" Margin="10" Width="80" Height="60" Background="White" BorderBrush="#A0A0A0" BorderThickness="1"
                    Click="BtnSort_Click">
                <StackPanel Spacing="4">
                    <TextBlock Text="A" FontSize="16" FontWeight="Bold" Foreground="Black" HorizontalAlignment="Center"/>
                    <TextBlock Text="Z ↓" FontSize="14" FontWeight="Bold" Foreground="Orange" HorizontalAlignment="Center" Margin="0,-8,0,0"/>
                    <TextBlock Text="Sort" FontSize="10" TextAlignment="Center" Foreground="Black"/>
                </StackPanel>
            </Button>

            <!-- Spacer -->
            <Border Grid.Column="2"/>

            <!-- Cancel Button -->
            <Button Grid.Column="3" Margin="10" Width="80" Height="60" Background="White" BorderBrush="#A0A0A0" BorderThickness="1"
                    Click="BtnCancel_Click">
                <StackPanel Spacing="4">
                    <Ellipse Width="32" Height="32" Fill="#E74C3C">
                        <Ellipse.OpacityMask>
                            <RadialGradientBrush>
                                <GradientStop Color="White" Offset="0"/>
                                <GradientStop Color="White" Offset="1"/>
                            </RadialGradientBrush>
                        </Ellipse.OpacityMask>
                    </Ellipse>
                    <TextBlock Text="✕" FontSize="20" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" Margin="0,-40,0,0"/>
                    <TextBlock Text="Cancel" FontSize="10" TextAlignment="Center" Foreground="Black" Margin="0,8,0,0"/>
                </StackPanel>
            </Button>

            <!-- Use Selected Button -->
            <Button Grid.Column="4" Margin="10" Width="120" Height="60" Background="White" BorderBrush="#A0A0A0" BorderThickness="1"
                    Click="BtnOpen_Click">
                <StackPanel Spacing="4">
                    <Image Source="/Assets/Icons/FileOpen.png" Width="32" Height="32"/>
                    <TextBlock Text="Use Selected" FontSize="10" TextAlignment="Center" Foreground="Black"/>
                </StackPanel>
            </Button>
        </Grid>
    </Grid>
</Window>
